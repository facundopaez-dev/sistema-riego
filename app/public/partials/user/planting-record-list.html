<div class="panel panel-info">
  <div class="panel-heading">
    <strong>Listado de registros de plantación</strong>
  </div>
  <div class="panel-body">
    <a href="#!/plantingRecords/new" class="btn btn-success" role="button">Nuevo registro de plantación</a>
  </div>
  <table class="table table-condensed table-hover table-fixed-top">
    <thead>
      <tr>
        <th>ID</th>
        <th>Cultivo</th>
        <th>Fecha de siembra</th>
        <th>Fecha de cosecha</th>
        <th>Parcela</th>
        <th>Estado del cultivo</th>
        <th class="text-right"></th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="p in data">
        <td>{{p.id}}</td>
        <td>{{p.crop.name}}</td>
        <td>{{p.seedDate | date:'dd/MM/yyyy'}}</td>
        <td>{{p.harvestDate | date:'dd/MM/yyyy'}}</td>
        <td>{{p.parcel.name}}</td>
        <td>{{p.status.name}}</td>
        <td class="text-right">
          <div class="btn-group" role="group" aria-label="...">
            <a href="#!/plantingRecords/view/{{p.id}}" class="btn btn-success" role="button">
              <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
            </a>
            <a href="#!/plantingRecords/edit/{{p.id}}" class="btn btn-success" role="button">
              <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            </a>
            <button type="button" class="btn btn-success" aria-label="Calcular" data-toggle="modal"
              data-target="#NuevoModal" ng-show="{{p.status.name == 'En desarrollo'}}"
              ng-click="calculateSuggestedIrrigation(p.id)">Calcular
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- PANEL CALCULO DE RIEGO SUGERIDO Y RIEGO REALIZADO -->
<div class="modal fade" id="NuevoModal" tabindex="-1" role="dialog" aria-labelledby="irrigationModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title" id="irrigationModalCenterTitle">
          <p class="titulo">Calculo de Riego</p>
        </h5>
      </div>

      <div class="modal-body">
        <form id="formIrrigation" class="form-horizontal" role="form" name="formIrrigation" novalidate>

          <div class="form-group">
            <label for="nombreParcela" class="col-md-3 control-label">
              <p class="text-right">Parcela</p>
            </label>
            <div class="col-md-5">
              <input type="text" class="form-control" id="nombreParcela" ng-model="irrigationRecord.parcel.name"
                ng-disabled="true">
            </div>
          </div>

          <div class="form-group">
            <label for="hectareaParcela" class="col-md-3 control-label">
              <p class="text-right">Hectáreas de la parcela</p>
            </label>
            <div class="col-md-5">
              <input type="number" class="form-control" id="hectareaParcela" ng-model="irrigationRecord.parcel.hectare"
                ng-disabled="true">
            </div>
          </div>

          <div class="form-group">
            <label for="suggestedIrrigation" class="col-md-3 control-label">
              <p class="text-right">Riego sugerido para el día de hoy (mm)</p>
            </label>
            <div class="col-md-4">
              <input type="number" class="form-control" id="suggestedIrrigation"
                ng-model="irrigationRecord.suggestedIrrigation" ng-disabled="true">
            </div>
          </div>

          <div class="form-group">
            <label for="tomorrowPrecipitation" class="col-md-3 control-label">
              <p class="text-right">Precipitación total estimada del día de mañana (mm)</p>
            </label>
            <div class="col-md-4">
              <input type="number" class="form-control" id="tomorrowPrecipitation"
                ng-model="irrigationRecord.tomorrowPrecipitation" ng-disabled="true">
            </div>
          </div>

          <div class="form-group">
            <label for="irrigationDone" class="col-md-3 control-label">
              <p class="text-right">Riego realizado en el día de hoy (mm):</p>
            </label>
            <div class="col-md-4">
              <input type="number" min="0" name="irrigationDone" class="form-control" id="irrigationDone"
                placeholder="Riego Realizado" ng-model="irrigationRecord.irrigationDone" required />
            </div>
            <div ng-show="formIrrigation.irrigationDone.$error.required" class="col-md-2">
              <p style="color: red">Requerido</p>
            </div>
          </div>

        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-dismiss="modal" ng-click="cancel()">Cancelar</button>
        <button type="button" class="btn btn-success" data-dismiss="modal" ng-click="saveIrrigationRecord()"
          ng-disabled="formIrrigation.irrigationDone.$error.required">
          {{irrigationRecord.id ? 'Actualizar':'Guardar'}}
        </button>
      </div>

    </div>
  </div>
</div>